<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>vku: Using vku</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">vku<span id="projectnumber">&#160;0.1.0</span>
   </div>
   <div id="projectbrief">A set of Vulkan utilities based on RAII idiom and Modern C++ features.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Using vku</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md29"></a></p>
<p>This page explains about how to build and install <em>vku</em> for your system, and how to seamlessly integrate it into your project.</p>
<h1><a class="anchor" id="autotoc_md30"></a>
1. Usage Options</h1>
<p><em>vku</em> uses CMake as the default build tool. With its versatility, you can choose the way you want to use <em>vku</em>. Options are:</p>
<ul>
<li>Manually clone, build and install <em>vku</em> into your system. After this, you can use <em>vku</em> via <code>find_package(vku CONFIG REQUIRED)</code> in your future CMake project.</li>
<li>Using vcpkg: <em>vku</em> is initially intended to be used with <a href="https://github.com/microsoft/vcpkg">vcpkg</a>. For this case, you don't have to install it manually, but may have to set some triplet and chainload settings for your vcpkg project.</li>
<li>Using CMake's <code>FetchContent</code> or <a href="https://github.com/cpm-cmake/CPM.cmake"><code>CPM.cmake</code></a>: with CMake's built-in feature, you can easily include <em>vku</em> in your project without any additional setup.</li>
</ul>
<h1><a class="anchor" id="autotoc_md31"></a>
2. Prerequisites</h1>
<h2><a class="anchor" id="autotoc_md32"></a>
2.1. Dependencies</h2>
<p><em>vku</em> depends on:</p>
<ul>
<li><a href="https://github.com/KhronosGroup/Vulkan-Hpp">Vulkan-Hpp</a>: C++ bindings for Vulkan API</li>
<li><a href="https://github.com/YaaZ/VulkanMemoryAllocator-Hpp">VulkanMemoryAllocator-Hpp</a>: C++ bindings for Vulkan Memory Allocator</li>
</ul>
<p>If you're using vcpkg, these dependencies are automatically installed. Otherwise, you must install them manually, then following CMake commands would available.</p>
<div class="fragment"><div class="line">find_package(VulkanMemoryAllocator CONFIG REQUIRED)</div>
<div class="line">find_package(VulkanMemoryAllocator-Hpp CONFIG REQUIRED)</div>
</div><!-- fragment --><p>If you're using <a href="https://github.com/google/shaderc">shaderc</a> runtime GLSL compilation feature (can be enabled by setting <code>VKU_USE_SHADERC</code> to <code>ON</code>), the installed Vulkan SDK must have <code>shaderc_combined</code> components and following CMake commands must be available.</p>
<div class="fragment"><div class="line">find_package(Vulkan COMPONENTS shaderc_combined REQUIRED)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md33"></a>
2.2. Compilers and Build Tools</h2>
<p><em>vku</em> uses the cutting edge C++20 feature, <a href="https://en.cppreference.com/w/cpp/language/modules">module</a>, which is not yet widely supported by most compilers. Unless you're using Windows and up-to-date MSVC compiler, most of the case you have to manually specify the non-system default compiler.</p>
<p>Followings are the <b>minimum</b> requirement for building <em>vku</em>.</p>
<ul>
<li>Compiler<ul>
<li>Clang 18.1.2 or later</li>
<li>MSVC 19.40 or later</li>
</ul>
</li>
<li>Build tool<ul>
<li>CMake 3.28 or later</li>
<li>Ninja 1.11</li>
</ul>
</li>
</ul>
<p>If you want to build <em>vku</em> with <a href="https://en.cppreference.com/w/cpp/standard_library#Importing_modules">C++23 standard library module</a>, you need:</p>
<ul>
<li>Build tool<ul>
<li>CMake 3.30 or later (for experimental <code>import std;</code> support: see <a href="https://www.kitware.com/import-std-in-cmake-3-30/">here</a> for the detail)</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="autotoc_md34"></a>
3. Building and Installing vku</h1>
<dl class="section remark"><dt>Remarks</dt><dd><em>vku</em> uses GitHub Actions for CI test. If you're struggling for building and installing <em>vku</em>, you can refer to the CI script (<a href="../.github/workflows/linux.yml">Linux</a>, <a href="../.github/workflows/windows.yml">Windows</a> for the detail.)</dd></dl>
<p>Clone the repository and make your shell in the repository root directory.</p>
<div class="fragment"><div class="line">git clone https://github.com/stripe2933/vku.git</div>
<div class="line">cd vku</div>
</div><!-- fragment --><p>If you're using vcpkg, make sure <code>VCPKG_ROOT</code> environment variable is set to your vcpkg root directory.</p>
<h2><a class="anchor" id="autotoc_md35"></a>
3.1. Windows + MSVC</h2>
<p><em>vku</em> provides you <code>CMakePresets.json</code> file for this configuration. Use <code>vcpkg</code> preset if you're managing dependencies with vcpkg, otherwise use <code>default</code> preset.</p>
<div class="fragment"><div class="line">cmake --preset=vcpkg # Configure</div>
<div class="line">cmake --build build --target install # Build and install</div>
</div><!-- fragment --><p>After the installation, package config files will be located in <code>build/install</code> directory. You can pass your own <code>CMAKE_INSTALL_PREFIX</code> when configuration time to change the installation directory (e.g. <code>C:\Program Files\vku</code>).</p>
<p>In future CMake project, you can use <code>find_package(vku CONFIG REQUIRED)</code> to use <em>vku</em>.</p>
<h2><a class="anchor" id="autotoc_md36"></a>
<a class="anchor" id="macos-clang"></a>3.2. macOS + Clang</h2>
<p>For macOS, you'll use the combination of Clang + libc++.</p>
<dl class="section important"><dt>Important</dt><dd>You must use the LLVM Clang, not the Apple Clang. The Apple Clang does not support the C++20 module feature.</dd></dl>
<p>You can pass these CMake configuration parameters via either CLI or your own <code>CMakeUserPresets.json</code>.</p>
<ul>
<li>Passing CLI parameters: <div class="fragment"><div class="line">cmake --preset=vcpkg \</div>
<div class="line">    -DCMAKE_C_COMPILER=&quot;/opt/homebrew/opt/llvm/bin/clang&quot; \</div>
<div class="line">    -DCMAKE_CXX_COMPILER=&quot;/opt/homebrew/opt/llvm/bin/clang++&quot; \</div>
<div class="line">    -DCMAKE_CXX_FLAGS=&quot;-nostdinc++ -nostdlib++ -isystem /opt/homebrew/opt/llvm/include/c++/v1&quot; \</div>
<div class="line">    -DCMAKE_EXE_LINKER_FLAGS=&quot;-L /opt/homebrew/opt/llvm/lib/c++ -Wl,-rpath,/opt/homebrew/opt/llvm/lib/c++ -lc++&quot; # Configure</div>
<div class="line">cmake --build build --target install # Build and install</div>
</div><!-- fragment --></li>
<li><p class="startli">Use CMake presets:</p>
<p class="startli"><code>CMakeUserPresets.json</code> </p><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;version&quot;: 6,</div>
<div class="line">  &quot;configurePresets&quot;: [</div>
<div class="line">    {</div>
<div class="line">      &quot;name&quot;: &quot;clang&quot;,</div>
<div class="line">      &quot;inherits&quot;: &quot;vcpkg&quot;,</div>
<div class="line">      &quot;cacheVariables&quot;: {</div>
<div class="line">        &quot;CMAKE_C_COMPILER&quot;: &quot;/opt/homebrew/opt/llvm/bin/clang&quot;,</div>
<div class="line">        &quot;CMAKE_CXX_COMPILER&quot;: &quot;/opt/homebrew/opt/llvm/bin/clang++&quot;,</div>
<div class="line">        &quot;CMAKE_CXX_FLAGS&quot;: &quot;-nostdinc++ -nostdlib++ -isystem /opt/homebrew/opt/llvm/include/c++/v1&quot;,</div>
<div class="line">        &quot;CMAKE_EXE_LINKER_FLAGS&quot;: &quot;-L /opt/homebrew/opt/llvm/lib/c++ -Wl,-rpath,/opt/homebrew/opt/llvm/lib/c++ -lc++&quot;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --><p> After file creation, you can use <code>--preset=clang</code> to configure.</p>
</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>About <code>CMAKE_CXX_FLAGS</code> and <code>CMAKE_EXE_LINKER_FLAGS</code> variable, see <a href="https://releases.llvm.org/18.1.4/projects/libcxx/docs/UsingLibcxx.html#id4">libc++ documentation</a>. These options make your compiler use the homebrew provided libc++, instead of the system default.</dd></dl>
<p>After the installation, package config files will be located in <code>build/install</code> directory. You can pass your own <code>CMAKE_INSTALL_PREFIX</code> when configuration time to change the installation directory (e.g. <code>/usr/local</code>).</p>
<p>In future CMake project, you can use <code>find_package(vku CONFIG REQUIRED)</code> to use <em>vku</em>.</p>
<h2><a class="anchor" id="autotoc_md37"></a>
3.3. Linux + Clang</h2>
<p>For Linux, you'll use Clang and you can choose either libc++ or libstdc++ for STL.</p>
<h3><a class="anchor" id="autotoc_md38"></a>
Using libstdc++</h3>
<p><em>vku</em> provides you <code>CMakePresets.json</code> file for this configuration. Use <code>vcpkg</code> preset if you're managing dependencies with vcpkg, otherwise use <code>default</code> preset.</p>
<div class="fragment"><div class="line">cmake --preset=vcpkg \</div>
<div class="line">  -DCMAKE_C_COMPILER=/usr/bin/clang \</div>
<div class="line">  -DCMAKE_CXX_COMPILER=/usr/bin/clang++ # Configure</div>
<div class="line">cmake --build build --target install # Build and install</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md39"></a>
Using libc++</h3>
<p>You have to specify <code>-stdlib=libc++</code> flag to your compiler.</p>
<div class="fragment"><div class="line">cmake --preset=vcpkg \</div>
<div class="line">  -DCMAKE_C_COMPILER=/usr/bin/clang \</div>
<div class="line">  -DCMAKE_CXX_COMPILER=/usr/bin/clang++ \</div>
<div class="line">  -DCMAKE_CXX_FLAGS=&quot;-stdlib=libc++&quot; \</div>
<div class="line">  -DCMAKE_EXE_LINKER_FLAGS=&quot;-stdlib=libc++ -lc++abi&quot; # Configure</div>
<div class="line">cmake --build build --target install # Build and install</div>
</div><!-- fragment --><p>Or you can make your own <code>CMakePresets.json</code> script (like macOS + Clang).</p>
<p>After the installation, package config files will be located in <code>build/install</code> directory. You can pass your own <code>CMAKE_INSTALL_PREFIX</code> when configuration time to change the installation directory (e.g. <code>/usr/local</code>).</p>
<p>In future CMake project, you can use <code>find_package(vku CONFIG REQUIRED)</code> to use <em>vku</em>.</p>
<h1><a class="anchor" id="autotoc_md40"></a>
4. Directly use <em>vku</em> in Your CMake Project</h1>
<p>Most of the compiler specific setup would be same as the above. You have to set the proper compilers for <em>vku</em>'s requirement.</p>
<h2><a class="anchor" id="autotoc_md41"></a>
4.1. Using vcpkg</h2>
<h3><a class="anchor" id="autotoc_md42"></a>
4.1.1. Add vku to your overlay ports</h3>
<p>Since <em>vku</em> does not officially in the vcpkg ports, you have to add the custom registry to <code>vcpkg-configurations.json</code> file.</p>
<dl class="section note"><dt>Note</dt><dd>I'm currently working for make <em>vku</em> to be available with vcpkg official ports.</dd></dl>
<p><code>vcpkg-configurations.json</code> </p><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;default-registry&quot;: {</div>
<div class="line">    &quot;kind&quot;: &quot;git&quot;,</div>
<div class="line">    &quot;baseline&quot;: &quot;1a66c32c6f90c2f646529975c3c076ed3dbdae0c&quot;,</div>
<div class="line">    &quot;repository&quot;: &quot;https://github.com/microsoft/vcpkg&quot;</div>
<div class="line">  },</div>
<div class="line">  &quot;registries&quot;: [</div>
<div class="line">    {</div>
<div class="line">      &quot;kind&quot;: &quot;git&quot;,</div>
<div class="line">      &quot;baseline&quot;: &quot;23dc743e35900a8f14d73aabb8546e8cc4229f9f&quot;,</div>
<div class="line">      &quot;reference&quot;: &quot;main&quot;,</div>
<div class="line">      &quot;repository&quot;: &quot;https://github.com/stripe2933/vcpkg-registry&quot;,</div>
<div class="line">      &quot;packages&quot;: [</div>
<div class="line">        &quot;vku&quot;</div>
<div class="line">      ]</div>
<div class="line">    }</div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --><p>If you're not familiar with <a href="https://learn.microsoft.com/en-us/vcpkg/consume/git-registries">vcpkg's private registry concept</a>, read the linked document can help you to what's going on.</p>
<h3><a class="anchor" id="autotoc_md43"></a>
4.1.2. Set the Proper Triplet and Chainload Toolchain</h3>
<p>If your system default compiler does not support C++20 module, this step is mandatory. Here's the example for x64 Linux + libc++.</p>
<p><code>triplets/x64-linux-clang.cmake</code> </p><div class="fragment"><div class="line">set(VCPKG_TARGET_ARCHITECTURE x64) # your target architecture</div>
<div class="line">set(VCPKG_CRT_LINKAGE static)</div>
<div class="line">set(VCPKG_LIBRARY_LINKAGE static)</div>
<div class="line">set(VCPKG_CMAKE_SYSTEM_NAME Linux) # your target system name</div>
<div class="line">set(VCPKG_CHAINLOAD_TOOLCHAIN_FILE ${CMAKE_CURRENT_LIST_DIR}/../clang-toolchain.cmake)</div>
</div><!-- fragment --><p><code>clang-toolchain.cmake</code> </p><div class="fragment"><div class="line">set(CMAKE_C_COMPILER /usr/bin/clang) # your clang path</div>
<div class="line">set(CMAKE_CXX_COMPILER /usr/bin/clang++) # your clang++ path</div>
<div class="line">set(CMAKE_CXX_FLAGS &quot;-stdlib=libc++&quot;)</div>
<div class="line">set(CMAKE_EXE_LINKER_FLAGS &quot;-stdlib=libc++ -lc++abi&quot;)</div>
</div><!-- fragment --><p>After setting custom triplets and toolchain file, set <code>VCPKG_TARGET_TRIPLET</code> point to your custom triplet name.</p>
<p><code>CMakePresets.json</code> </p><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;version&quot;: 6,</div>
<div class="line">  &quot;configurePresets&quot;: [</div>
<div class="line">    {</div>
<div class="line">      &quot;name&quot;: &quot;vcpkg&quot;,</div>
<div class="line">      &quot;inherits&quot;: &quot;default&quot;,</div>
<div class="line">      &quot;toolchainFile&quot;: &quot;$env{VCPKG_ROOT}/scripts/buildsystems/vcpkg.cmake&quot;,</div>
<div class="line">      &quot;cacheVariables&quot;: {</div>
<div class="line">        &quot;VCPKG_TARGET_TRIPLET&quot;: &quot;x64-linux-clang&quot;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --><p>Also, your custom triplet file must be added to the <code>overlay-triplets</code> list.</p>
<p><code>vcpkg-configurations.json</code> </p><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;default-registry&quot;: { ... },</div>
<div class="line">  &quot;registries&quot;: [ ... ],</div>
<div class="line">  &quot;overlay-triplets&quot;: [ &quot;triplets&quot; ]</div>
<div class="line">}</div>
</div><!-- fragment --><p>All done! Now configuring your project with <code>--preset=vcpkg</code> would automatically build <em>vku</em>, and you can use it as <code>find_package(vku CONFIG REQUIRED)</code>.</p>
<h2><a class="anchor" id="autotoc_md44"></a>
4.2. Using CMake's <code>FetchContent</code> or <code>CPM.cmake</code></h2>
<ol type="1">
<li>Using <code>FetchContent</code>: <div class="fragment"><div class="line">FetchContent_Declare(</div>
<div class="line">    vku</div>
<div class="line">    URL https://github.com/stripe2933/vku/archive/refs/tags/v0.1.0.tar.gz</div>
<div class="line">)</div>
<div class="line">FetchContent_MakeAvailable(vku)</div>
</div><!-- fragment --></li>
<li>Using <code>CPM.cmake</code>: <div class="fragment"><div class="line">CPMAddPackage(&quot;gh:stripe2933/vku@0.1.0&quot;)</div>
</div><!-- fragment --></li>
</ol>
<p>After this, you can use <code>find_package(vku CONFIG REQUIRED)</code> in your project.</p>
<h1><a class="anchor" id="autotoc_md45"></a>
5. Configuration Options</h1>
<p>Here are some CMake configuration options. You can pass these options via either CLI, CMake presets or vcpkg feature.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Option   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Default   </th><th class="markdownTableHeadCenter">vcpkg feature    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>VKU_USE_STD_MODULE</code>   </td><td class="markdownTableBodyNone">Use the standard library module for compilation.   </td><td class="markdownTableBodyNone"><code>OFF</code>   </td><td class="markdownTableBodyCenter"><code>std-module</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>VKU_USE_SHADERC</code>   </td><td class="markdownTableBodyNone">Add runtime GLSL compilation feature by shaderc.   </td><td class="markdownTableBodyNone"><code>OFF</code>   </td><td class="markdownTableBodyCenter"><code>shaderc</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>VKU_DEFAULT_DYNAMIC_DISPATCHER</code>   </td><td class="markdownTableBodyNone">Use the vk::DispatchLoaderDynamic as the default dispatcher.   </td><td class="markdownTableBodyNone"><code>OFF</code>   </td><td class="markdownTableBodyCenter"><code>dynamic-dispatcher</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>VKU_ENABLE_TEST</code>   </td><td class="markdownTableBodyNone">Enable the test targets.   </td><td class="markdownTableBodyNone"><code>OFF</code>   </td><td class="markdownTableBodyCenter">-   </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
